<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/profdefault}">
<head>
    <link rel="stylesheet" href="/css/prof/assignment.css">
    <link rel="stylesheet" href="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.css" />
    <link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
    <script type="text/javascript" src="https://uicdn.toast.com/tui.pagination/v3.4.0/tui-pagination.js"></script>
    <script>
        $(document).ready(function() {
            $('.assiSubmitBtn').on('click', function(event) {
                event.preventDefault(); // í´ë¦­ ì´ë²¤íŠ¸ ê¸°ë³¸ ë™ì‘ ì¤‘ë‹¨

                var submitButton = $(this);
                var buttonText = submitButton.find('.buttonText'); // ë²„íŠ¼ ë‚´ì˜ í…ìŠ¤íŠ¸ ìš”ì†Œ

                // AJAX ìš”ì²­ì„ ë³´ë‚´ê³  ì„±ê³µí•˜ë©´ ë²„íŠ¼ í…ìŠ¤íŠ¸ë¥¼ ë³€ê²½
                $.ajax({
                    type: 'POST', // ë˜ëŠ” ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œ
                    url: submitButton.attr('href'), // ë˜ëŠ” ì‚¬ìš©í•˜ëŠ” URL
                    success: function(response) {
                        if (response === 'success') {
                            // "ì œì¶œ" ë²„íŠ¼ í…ìŠ¤íŠ¸ë¥¼ "ì œì¶œë¨"ìœ¼ë¡œ ë³€ê²½
                            buttonText.text('ì œì¶œë¨');
                        }
                    },
                    error: function() {
                        alert('ê³¼ì œ ì œì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                    }
                });
            });
        });
    </script>
</head>

<div id="mainFrame" layout:fragment="content" class="mainFrame">

    <div class="assi_body">
        <form id="searchForm">
        <div class="assi_back_btn_box">
            <div class="assi_course_search_text_box">
                <span>ğŸ”&nbsp ê³¼ì œê²€ìƒ‰</span>
            </div>
<!--            <div class="assi_back_btn">-->
<!--                <button type="button" class="backBtn">ëŒì•„ê°€ê¸°</button>-->
<!--            </div>-->
        </div>
        <div class="assi_search_box">
            <div class="assi_search_bottom_box">
                <div class="assi_ch_lect_name">
                    <div class="assi_search_lect_name_text">
                        <span>ê°•ì¢Œëª…</span>
                    </div>
                    <div class="assi_search_lect_name">
                        <input id="lectId" style="width: 351px; height: 35px; border-radius: 5px; border: 1px solid #cccccc; outline: none; text-indent: 5px;" type="text" th:value="${lectInfo.lectName}" readonly/>
                    </div>
                </div>
            </div>
            <div class="assi_search_bottom_box">
                <div class="assi_ch_lect_name">
                    <div class="assi_search_lect_name_text">
                        <span>ê³¼ì œëª…</span>
                    </div>
                    <div class="assi_search_lect_name">
                        <select id="assiId" style="width: 351px; height: 35px; border-radius: 5px; border: 1px solid #cccccc; outline: none; text-indent: 5px;">
                            <option th:each="assignment : ${assignmentsList}"
                                    th:value="${assignment.getAssiId}"
                                    th:text="${assignment.name}">
                            </option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        </form>

            <div class="assi_total_status_text_box">
                <span>ğŸ“Š&nbsp ê³¼ì œì •ë³´</span>
                <div class="assi_que_btn_box">
                </div>
            </div>
            <div class="assi_ch_total_status_grid1">
                <table class="assi_ch_assi_info_tb">
                    <thead>
                        <tr>
                            <td><span>ê³¼ì œë²ˆí˜¸</span></td>
                            <td><span>ê³¼ì œëª…</span></td>
                            <td><span>ì œì¶œì‹œì‘ì¼ì‹œ</span></td>
                            <td><span>ì œì¶œë§ˆê°ì¼ì‹œ</span></td>
                            <td><span>ì§„í–‰ìƒíƒœ</span></td>
                            <td><span>ê³¼ì œìˆ˜ì •</span></td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="assignment : ${assignmentsList}">
                            <td><span th:text="${assignment.getAssiId}"></span></td>
                            <td><span th:text="${assignment.name}"></span></td>
                            <td><span th:text="${assignment.start}"></span></td>
                            <td><span th:text="${assignment.end}"></span></td>
                            <td><span th:text="${assignment.isActive ? 'ì§„í–‰ì¤‘' : 'ë§ˆê°'}"></span></td>
                            <td>
                                <a style="text-decoration: none; background: #6b6b6b; color: white; border: none; width: 76px; height: 28px; border-radius: 5px; line-height: 28px;" type="button" class="assiDeleteBtn" th:href="@{'/student/lecture/view/' + ${lectId} + '/assignments/'+ ${assignment.getAssiId}+ '/submit'}"><span class="buttonText">ì œì¶œ</span></a>
                                <a style="text-decoration: none; background: #6b6b6b; color: white; border: none; width: 76px; height: 28px; border-radius: 5px; line-height: 28px;" type="button" class="assiUpdateBtn" th:href="@{'/student/lecture/view/' + ${lectId} + '/assignments/'+ ${assignment.getAssiId}}"><span>ê³¼ì œë³´ê¸°</span></a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

    </div>
    <script src="/js/prof/assignment.js"></script>
</div>